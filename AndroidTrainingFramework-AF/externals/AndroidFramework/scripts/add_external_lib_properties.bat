@echo off
@echo Executing: %~f0

set WRONG_ARGUMENTS_=0

if "%1"=="RESET_PATHS_COUNT" (
    set PATHS_COUNT=
    goto eof
)


if "%1"=="" (
    set WRONG_ARGUMENTS_=1
)

if "%2"=="" (
    set WRONG_ARGUMENTS_=1
)


if "%WRONG_ARGUMENTS_%"=="1" (
    call cecho {red}ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR{#}{\n}
    call cecho {red}ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR{#}{\n}
    call cecho {red}Wrong arguments for add_external_lib_properties!{#}{\n}
    call cecho {red}use it like this: add_external_lib_properties.bat [PathWhereToCreate_external_lib.properties] [pathToBeAdded]{#}{\n}
    call cecho {red}OR like this: add_external_lib_properties.bat RESET_PATHS_COUNT{#}{\n}
    call cecho {red}[PathWhereToCreate_external_lib.properties] parameter is the absolute path where to create the file external_lib.properties.{#}{\n}
    call cecho {red}[pathToBeAdded] parameter is the path where are the libs{#}{\n}
    call cecho {red}RESET_PATHS_COUNT parameter will reset the counter and the file will be erased at the next call{#}{\n}
	call cecho {red}ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR{#}{\n}
    call cecho {red}ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR-ERROR{#}{\n}
    pause
    goto eof
)



if "%PATHS_COUNT%"=="" (
    set PATHS_COUNT=1
    @echo #this file is generated by add_external_lib_properties.bat from the Android Core Package > %1\external_lib.properties
)

call "%TOOLS_DIR%\GetRelativePath\bin\GetRelativePath.bat" %1 %2
@echo android.library.reference.%PATHS_COUNT% =%RELATIVE_PATH%>> %1\external_lib.properties
set /a PATHS_COUNT=%PATHS_COUNT% + 1



:eof